
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
      
    <html xmlns="http://www.w3.org/1999/xhtml"> 
      
    <head> 
      
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
      
    <title>添加点</title> 
      
    <script type="text/javascript" src="http://10.160.3.120:8084/webapi/auth.json?t=flashmap&v=2.4.1&key ="></script> 
      
    <script type="text/javascript"> 
      
    var mapObj=null; 
      
    function  mapInit() { 
      
        var mapoption = new MMapOptions(); 
      
        mapoption.toolbar = MConstants.ROUND; //设置地图初始化工具条，ROUND:新版圆工具条 
      
        mapoption.overviewMap = MConstants.SHOW; //设置鹰眼地图的状态，SHOW:显示，HIDE:隐藏（默认） 
      
        mapoption.scale = MConstants.SHOW; //设置地图初始化比例尺状态，SHOW:显示（默认），HIDE:隐藏。 
      
        mapoption.zoom = 13;//要加载的地图的缩放级别 
      
        mapoption.center = new MLngLat(116.397428,39.90923);//要加载的地图的中心点经纬度坐标 
      
        mapoption.language = MConstants.MAP_CN;//设置地图类型，MAP_CN:中文地图（默认），MAP_EN:英文地图 
      
        mapoption.fullScreenButton = MConstants.SHOW;//设置是否显示全屏按钮，SHOW:显示（默认），HIDE:隐藏 
      
        mapoption.centerCross = MConstants.SHOW;//设置是否在地图上显示中心十字,SHOW:显示（默认），HIDE:隐藏 
      
        mapoption.toolbarPos=new MPoint(20,20); //设置工具条在地图上的显示位置 
      
        mapObj = new MMap("map", mapoption); //地图初始化 
      
    } 
      
     
      
    function addMarker(){ 
      
        var tipOption=new MTipOptions();//添加信息窗口 
      
        tipOption.title="信息窗口标题";//信息窗口标题 
      
        tipOption.content="信息窗口内容";//信息窗口内容 
      
     
      
        var labelOption=new MLabelOptions();//添加标注 
      
        labelOption.content="点";//标注的内容 
      
        labelOption.hasBorder=true;//设置标注背景是否有边框，默认为false，即没有边框 
      
        labelOption.hasBackground=true;//设置标注是否有背景，默认为false，即没有背景 
      
        //标注左上角相对于图片中下部的锚点。Label左上角与图片中下部重合时，记为像素坐标原点(0,0)。 
      
        labelOption.labelPosition=new MPoint(10,10); 
      
     
      
        //构建一个名为markerOption的点选项对象。 
      
        var markerOption = new MMarkerOptions(); 
      
        //标注图片或SWF的url，默认为蓝色气球图片 
      
        markerOption.imageUrl="http://code.mapabc.com/images/lan_1.png"; 
      
        //是否使用图片代理形式 
      
        //如果imageUrl属性的图片资源所在域名下没有crossdomain.xml，则需要用代理形式添加该图片资源 
      
        markerOption.picAgent=false; 
      
        //设置图片相对于加点经纬度坐标的位置。九宫格位置。默认BOTTOM_CENTER代表正下方 
      
        markerOption.imageAlign=MConstants.BOTTOM_CENTER; 
      
        //设置点的标注参数选项 
      
        markerOption.labelOption=labelOption; 
      
        //拖动结束后是否有弹跳效果,ture，有弹跳效果；false，没有弹跳效果（默认） 
      
        //当有弹跳效果的时候，marker的imageAlign属性必须为BOTTOM_CENTER，否则弹跳效果显示不正确 
      
        markerOption.isBounce=false; 
      
        //设置点是否为可编辑状态,rue，可以编辑； false，不可编辑（默认） 
      
        markerOption.isEditable=false; 
      
        //设置点的信息窗口参数选项 
      
        markerOption.tipOption = tipOption; 
      
        //是否在地图中显示信息窗口，true，可以显示（默认）；false，不显示 
      
        markerOption.canShowTip= true; 
      
        //设置图标旋转的角度 
      
        markerOption.rotation="40"; 
      
        //是否显示阴影，默认为true，即有阴影 
      
        markerOption.hasShadow=true; 
      
        //设置点是否高亮显示 
      
        //设置高亮显示与设置可编辑有冲突，只能设置一个，不能同时设置。 
      
        markerOption.isDimorphic=true; 
      
        //设置第二种状态的颜色，默认为0xFF0000，即红色 
      
        markerOption.dimorphicColor="0x00A0FF"; 
      
        //通过经纬度坐标及参数选项确定标注信息 
      
        Mmarker = new MMarker(new MLngLat("116.40546798706054","39.90776109736608"),markerOption); 
      
        //对象编号，也是对象的唯一标识 
      
        Mmarker.id="mark101"; 
      
        //向地图添加覆盖物 
      
        mapObj.addOverlay(Mmarker,true) ; 
      
    } 
      
    </script> 
      
    </head> 
      
    <body onload="mapInit();"> 
      
    <div id="map" style="width:500px;height:400px"></div> 
      
    <div> 
      
    <table> 
      
    <tr> 
      
        <td><input type="button" onClick="javascript:addMarker();" value="添加标注点"/></td> 
      
        <td><input type="button" onClick="javascript:mapObj.removeOverlaysByType(MOverlay.TYPE_MARKER);" value="删除标注点"/></td> 
      
    </tr> 
      
    </table> 
      
    <!-- mapObj.removeOverlaysByType(MOverlay.TYPE_MARKER) 删除地图上所有的MARKER对象--> 
      
    </div> 
      
    </body> 
      
    </html>  

